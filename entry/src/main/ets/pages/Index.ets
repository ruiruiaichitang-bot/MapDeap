// pages/Index.ets
import { HomeView } from '../views/HomeView'; // å¼•å…¥ç»„ä»¶
import { MineView } from '../views/MineView';

@Entry
@Component
struct Index {
  // è®°å½•å½“å‰é€‰ä¸­çš„æ˜¯ç¬¬å‡ ä¸ª Tab (0: é¦–é¡µ, 1: æˆ‘çš„)
  @State currentIndex: number = 0;

  // è‡ªå®šä¹‰ Tab æŒ‰é’®çš„æ ·å¼ (é€‰ä¸­å˜ç»¿ï¼Œæ²¡é€‰ä¸­å˜ç°)
  @Builder TabBarBuilder(title: string, index: number, icon: ResourceStr) {
    Column() {
      // å›¾æ ‡ (å®é™…å¼€å‘ä¼šç”¨ Imageï¼Œè¿™é‡Œæš‚æ—¶ç”¨æ–‡å­—ä»£æ›¿æˆ–è€…ç®€å•åœ†ç‚¹)
      // å¦‚æœä½ æœ‰å›¾æ ‡èµ„æºï¼šImage(icon).width(24).fillColor(...)
      Text(index === 0 ? 'ğŸ ' : 'ğŸ‘¤')
        .fontSize(24)
        .margin({ bottom: 4 })

      Text(title)
        .fontColor(this.currentIndex === index ? '#1BAE5D' : '#999999')
        .fontSize(10)
        .fontWeight(this.currentIndex === index ? 500 : 400)
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
  }

  build() {
    // ğŸ‘‡ æ ¸å¿ƒç»„ä»¶ï¼šTabs
    Tabs({ barPosition: BarPosition.End }) { // End è¡¨ç¤ºå¯¼èˆªæ åœ¨åº•éƒ¨

      // --- ç¬¬ 1 é¡µï¼šé¦–é¡µ ---
      TabContent() {
        HomeView() // <--- ä½¿ç”¨æˆ‘ä»¬æ‹†åˆ†å‡ºæ¥çš„ç»„ä»¶
      }
      .tabBar(this.TabBarBuilder('é¦–é¡µ', 0, $r('app.media.Shoye')))

      // --- ç¬¬ 2 é¡µï¼šæˆ‘çš„ ---
      TabContent() {
        MineView() // <--- ä½¿ç”¨æˆ‘ä»¬æ‹†åˆ†å‡ºæ¥çš„ç»„ä»¶
      }
      .tabBar(this.TabBarBuilder('æˆ‘çš„', 1, $r('app.media.My')))
    }
    .barHeight(60) // åº•éƒ¨å¯¼èˆªæ é«˜åº¦
    .onChange((index) => {
      this.currentIndex = index; // è®°å½•åˆ‡æ¢çŠ¶æ€
    })
    .scrollable(false) // ç¦æ­¢å·¦å³æ»‘åŠ¨åˆ‡æ¢ (æ ‡å‡† App é€šå¸¸æ˜¯ç‚¹æŒ‰åˆ‡æ¢)
  }
}